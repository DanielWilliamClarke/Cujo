version: 2
jobs:
  client:
    docker:
      - image: circleci/node:10
    steps:
      - checkout
      - run:
          name: Move To Client
          command: cd ./client
      - run:
          name: Setup Environment
          command: sudo npm run setup
      - run:
          name: Run Tests
          command: sudo npm run test
      - run:
          name: Run Coverage
          command: sudo npm run coverage

  server:
    working_directory: ~/server
    docker:
      - image: circleci/node:10
    steps:
      - checkout

workflows:
  version: 2
  build_test_client_server:
    jobs:
      - client
      - server